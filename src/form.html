<html>
  <body>
    <form>
      Enter a question no: <input type="text" name="id" /><br /><br />
      Enter a question: <input type="text" name="question_text" /><br /><br />
      Enter choice 1: <input type="text" name="choice_one" /><br /><br />
      Enter choice 2: <input type="text" name="choice_two" /><br /><br />
      Enter choice 3: <input type="text" name="choice_three" /><br /><br />
      Enter choice 4: <input type="text" name="choice_four" /><br /><br />
      Correct option: <input type="text" name="correct_choice" /><br /><br />
    </form>
  </body>
  <input type="button" value="submit" onclick="formsubmit()" />
  <input type="button" value="add question" onclick="add_question()" />
  <input type="reset" value="reset" />
  <input type="button" value="View data" onclick="getvalues()" />
  <div>

  </div>
  <script>
    function add_question() {
      const parent = document.querySelector("body");
      parent.insertAdjacentHTML(
        "beforeend",
        `<form>
      Enter a question no: <input type="text" name="id" /><br /><br />
      Enter a question: <input type="text" name="question_text" /><br /><br />
      Enter choice 1: <input type="text" name="choice_one" /><br /><br />
      Enter choice 2: <input type="text" name="choice_two" /><br /><br />
      Enter choice 3: <input type="text" name="choice_three" /><br /><br />
      Enter choice 4: <input type="text" name="choice_four" /><br /><br />
      Correct option: <input type="text" name="correct_choice" /><br /><br />
    </form>`
      );
    }

    var mainobj = [];
    function formsubmit() {
      var i = 0;
      const form = document.querySelectorAll("form");
      form.forEach(function contstruct(form) {
        const formData = new FormData(form);
        var object = {};
        formData.forEach(function (value, key) {
          object[key] = value;
        });
        mainobj[i] = object;
        i++;
      });
      var newmain = JSON.stringify({ qset: mainobj });
      console.log(newmain);
      fetch("http://localhost:8000/questions", {
        method: "POST",
        body: newmain,
        headers: { "Content-Type": "application/json" },
      }).then((response) => {
        console.log(response);
      });
    }

    function getvalues() {
      const di = document.querySelector("div");
      fetch("http://localhost:8000/view_questions", {
        method: "GET",
      })
        .then((response) => {
          return response.json();
        })
        .then((data) => {
          
          data.forEach((d) => 
          di.insertAdjacentHTML("beforeend",
          `<div>${d.question_text}</div>
          <input type='radio' value=${d.choice_one}>${d.choice_one}<br>
          <input type='radio' value=${d.choice_two}>${d.choice_two}<br>
          <input type='radio' value=${d.choice_three}>${d.choice_three}<br>
          <input type='radio' value=${d.choice_four}>${d.choice_four}<br>`)
          )
        });
    }
  </script>
</html>
